<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="map[name:MÃ­rian Bruckschen Motta Barros]">
<meta name="description" content="Complementary tutorial for a hello world in OCR in Portuguese using (py)tesseract under Anaconda, with language-specific &#39;Failed loading language&#39; error resolution" />
<meta name="keywords" content=", brazilian portuguese, pdf, ocr, tesseract, pytesseract, anaconda" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://mirianbr.com/posts/2021-07-13-pytesseract_hello_world_in_portuguese_under_anaconda/" />


    <title>
        
            A pytesseract hello world in Portuguese under Anaconda :: MÃ­rian Bruckschen Motta Barros&#39;s Website  â€” Technical Documentation and Customer Services Consultant
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.17863a81d979b637a02cd7632a4d86e9d80563ef460fd6af1a56962efcaa066b.css">



    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">
    <meta name="theme-color" content="">



<meta itemprop="name" content="A pytesseract hello world in Portuguese under Anaconda">
<meta itemprop="description" content="Complementary tutorial for a hello world in OCR in Portuguese using (py)tesseract under Anaconda, with language-specific &#39;Failed loading language&#39; error resolution"><meta itemprop="datePublished" content="2021-07-13T00:00:00+00:00" />
<meta itemprop="dateModified" content="2021-07-13T00:00:00+00:00" />
<meta itemprop="wordCount" content="321"><meta itemprop="image" content="https://mirianbr.com"/>
<meta itemprop="keywords" content="brazilian portuguese,pdf,ocr,tesseract,pytesseract,anaconda," />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://mirianbr.com"/>

<meta name="twitter:title" content="A pytesseract hello world in Portuguese under Anaconda"/>
<meta name="twitter:description" content="Complementary tutorial for a hello world in OCR in Portuguese using (py)tesseract under Anaconda, with language-specific &#39;Failed loading language&#39; error resolution"/>




    <meta property="og:title" content="A pytesseract hello world in Portuguese under Anaconda" />
<meta property="og:description" content="Complementary tutorial for a hello world in OCR in Portuguese using (py)tesseract under Anaconda, with language-specific &#39;Failed loading language&#39; error resolution" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mirianbr.com/posts/2021-07-13-pytesseract_hello_world_in_portuguese_under_anaconda/" /><meta property="og:image" content="https://mirianbr.com"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-07-13T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-07-13T00:00:00+00:00" /><meta property="og:site_name" content="MÃ­rian Bruckschen Motta Barros&#39;s Website" />





    <meta property="article:section" content="OCR" />

    <meta property="article:section" content="Data Scrapping" />

    <meta property="article:section" content="Tutorials" />



    <meta property="article:published_time" content="2021-07-13 00:00:00 &#43;0000 UTC" />










    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">homepage</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about">About</a></li><li><a href="/posts">Blog</a></li><li><a href="/projects">Projects</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://mirianbr.com/posts/2021-07-13-pytesseract_hello_world_in_portuguese_under_anaconda/">A pytesseract hello world in Portuguese under Anaconda</a></h2>

            
            
            

            <div class="post-content">
                <p>Playing with OCR using python for the first time, I came across <a href="https://github.com/tesseract-ocr/tesseract">tesseract</a> and its Python wrapper, <a href="https://pypi.org/project/pytesseract/">pytesseract</a>. I started by (and recommend) <a href="https://pythonforundergradengineers.com/how-to-install-pytesseract.html">this detailed tutorial</a>, that covers the tesseract and pytesseract installation, assuming you already have Anaconda.</p>
<h2 id="forcing-the-tessdata-dir-to-be-found">Forcing the tessdata-dir to be found</h2>
<p>Depending on your installation, though, things may not work at first. Mine didn&rsquo;t, for the tessdata-dir wasn&rsquo;t being found (<code>Error opening data file...</code> error). In order to resolve this, I followed <a href="https://pypi.org/project/pytesseract/">pytesseract usage hint</a> to force the tessdata directory:</p>
<ol>
<li>Find the tessdata directory in my local installation</li>
<li>Create a <a href="https://docs.python.org/3.3/reference/lexical_analysis.html?highlight=string%20literals#string-and-bytes-literals">literal string variable</a> (prefixed by <code>r'</code>) to store the directory path, so your backslashes are interpreted literally</li>
<li>Use this string when calling image_to_string in the <code>config</code> parameter</li>
</ol>
<p>See my code snippet below:</p>
<pre tabindex="0"><code>tessdata_dir_config = r'--tessdata-dir &quot;C:\Users\miria\anaconda3\envs\tesseract\Library\bin\tessdata&quot;'
phrase = ocr.image_to_string(Image.open('oi.jpeg'), config=tessdata_dir_config)
</code></pre><h2 id="failed-loading-language-por-tesseract-couldnt-load-any-languages">Failed loading language &lsquo;por&rsquo;, Tesseract couldn&rsquo;t load any languages!</h2>
<p>If you want to use tesseract to read texts from images that are not in English (in my case, it&rsquo;s Portuguese), have in mind Anaconda may not have installed your target language.</p>
<p>My English tutorials worked, but not other languages (<a href="https://github.com/tesseract-ocr/tesseract/blob/master/doc/tesseract.1.asc#languages">announced to be supported</a>). Every time, I got the error below:</p>
<pre tabindex="0"><code>TesseractError: (1, 'Error opening data file &lt;your tessdata dir&gt;/por.traineddata 
  Please make sure the TESSDATA_PREFIX environment variable is set to your &quot;tessdata&quot; directory. 
  Failed loading language 'por' 
  Tesseract couldn't load any languages! 
  Could not initialize tesseract.')
</code></pre><p>The <code>couldn't load any languages</code> part led me to find the same answers as the previous section &ndash; forcing the tessdata-dir configuration. Except it didn&rsquo;t happen for English.</p>
<p>The relevant part of the error message was the <code>language 'por'</code>: tesseract didn&rsquo;t have Portuguese data. Understanding the error was much harder than the resolution:</p>
<ol>
<li>Download your language data from the <a href="https://github.com/tesseract-ocr/tessdata/">tesseract repository</a></li>
<li>Save it in your tessdata directory</li>
</ol>
<p>All done!</p>
<p>Having the config and data set up, OCR with tesseract in Portuguese worked great. See how in <a href="https://github.com/mirianbr/vaccine-batches/blob/main/hello-ocr.ipynb">my Jupyter Notebook for this tutorial</a>. ðŸ˜‰</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://mirianbr.com/tags/brazilian-portuguese/">brazilian portuguese</a></span>
        <span class="tag"><a href="https://mirianbr.com/tags/pdf/">pdf</a></span>
        <span class="tag"><a href="https://mirianbr.com/tags/ocr/">ocr</a></span>
        <span class="tag"><a href="https://mirianbr.com/tags/tesseract/">tesseract</a></span>
        <span class="tag"><a href="https://mirianbr.com/tags/pytesseract/">pytesseract</a></span>
        <span class="tag"><a href="https://mirianbr.com/tags/anaconda/">anaconda</a></span>
        
    </p>

            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>

        <span class="tag"><a href="https://mirianbr.com/categories/ocr/">OCR</a></span>
        <span class="tag"><a href="https://mirianbr.com/categories/data-scrapping/">Data Scrapping</a></span>
        <span class="tag"><a href="https://mirianbr.com/categories/tutorials/">Tutorials</a></span>
        
    </p>

  		</div>
    </main>

            </div>

            
                <footer class="footer">
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.599099f1f14b78b657d524b28e10e0c5098e7cd46e9c7aed73d577068a276c3ff1bb234cbf29cb313333e83cf411727b43157c91ce5b809e2ffc81664614608e.js" integrity="sha512-WZCZ8fFLeLZX1SSyjhDgxQmOfNRunHrtc9V3BoonbD/xuyNMvynLMTMz6Dz0EXJ7QxV8kc5bgJ4v/IFmRhRgjg=="></script>



    </body>
</html>
